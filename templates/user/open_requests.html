{% from '_top_bar.html' import render_header%}
<!DOCTYPE html>
<html>
<head>
    <title>Pedidos Feitos Abertos</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='user/open_requests.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    {{ render_header() }}

    <div class="container">
        <h1>Aguardando Pagamento</h1>
        <ul>
            {% for request in requests.values() %}
                {% if request.state == 'payment-pending' %}
                <li>
                    <div class="results">
                        <div class="photo-card">
                            <a href="{{url_for('paymentqr',item_id=request.item_id,user_id=request.interested_id,seller_id=request.supplier_id)}}">
                                <img src="/image?id={{itens[request.item_id].photo}}" alt="{{itens[request.item_id].name}}">
                                <span>{{itens[request.item_id].name}}</span>
                            </a>
                        </div>
                    </div>
                </li>
                {% endif %}
            {% endfor %}
        </ul>
        <h1>Aguardando Aprovação</h1>
        <ul>
            {% for request in requests.values() %}
                {% if request.state == 'open' %}
                <div class="results">
                    <div class="photo-card">
                        <a href="{{url_for('item', id=request.item_id)}}">
                            <img src="/image?id={{itens[request.item_id].photo}}" alt="{{itens[request.item_id].name}}">
                            <span>{{itens[request.item_id].name}}</span>
                        </a>
                    </div>
                </div>
                {% endif %}
            {% endfor %}
        </ul>

        <h1>Aprovados</h1>
        <ul>
            {% for request in requests.values() %}
                {% if request.state == 'accepted' %}
                <li>
                    <div class="results">
                        <div class="photo-card">
                            <a href="{{url_for('item', id=request.item_id)}}">
                                <img src="/image?id={{itens[request.item_id].photo}}" alt="{{itens[request.item_id].name}}">
                                <span>{{itens[request.item_id].name}}</span>
                            </a>
                            <div class="contact-info">
                                <span>Entre em contato por:</span>
                                <details>
                                    <summary>Contactar</summary>
                                    <li> Telefone: {{users[request.supplier_id].phone}}</li>
                                    <li> Email: {{users[request.supplier_id].email}}</li>
                                </details>
                            </div>
                        </div>
                    </div>
                    <br>
                    
                    <!-- <button class="contact-button">Contactar</button> -->
                </li>
                {% endif %}
            {% endfor %}
        </ul>

        <h1>Rejeitados</h1>
        <ul>
            {% for request in requests.values() %}
                {% if request.state == 'rejected' %}
                <div class="results">
                    <div class="photo-card">
                        <a href="{{url_for('item', id=request.item_id)}}">
                            <img src="/image?id={{itens[request.item_id].photo}}" alt="{{itens[request.item_id].name}}">
                            <span>{{itens[request.item_id].name}}</span>
                        </a>
                    </div>
                </div>
                {% endif %}
            {% endfor %}
        </ul>
    </div>
</body>
</html>
